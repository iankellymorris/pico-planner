<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Assignment Tracker</title>
  <!-- Tabulator CSS -->
  <link href="https://cdn.jsdelivr.net/npm/tabulator-tables@5.5.2/dist/css/tabulator.min.css" rel="stylesheet">
  <style>
    body { font-family: sans-serif; margin: 20px; }
    .form-container { margin: 20px 0; }
    .form-container input, .form-container select {
      margin-right: 10px; padding: 5px;
    }
  </style>
</head>
<body>
  <h1>Assignment Tracker</h1>

  <!-- Form for adding assignments -->
  <div class="form-container">
    <select id="class-input">
      <option value="MATH 1220">MATH 1220</option>
      <option value="PHYS 2210">PHYS 2210</option>
      <option value="ECE 1400">ECE 1400</option>
    </select>
    <input type="text" id="assignment-input" placeholder="Assignment Name">
    <input type="date" id="due-input">
    <input type="url" id="link-input" placeholder="https://...">
    <button id="add-btn">Add Assignment</button>
  </div>

  <div id="assignment-table"></div>

  <!-- Tabulator JS -->
  <script src="https://cdn.jsdelivr.net/npm/tabulator-tables@5.5.2/dist/js/tabulator.min.js"></script>
  <script>
    // Load saved data or use defaults
    let savedData = JSON.parse(localStorage.getItem("assignments")) || [
      { class: "MATH 1220", assignment: "HW 1", due: "2025-09-01", link: "" },
      { class: "PHYS 2210", assignment: "Lab 1", due: "2025-09-03", link: "" },
      { class: "ECE 1400", assignment: "Project Proposal", due: "2025-09-05", link: "" }
    ];

    // Initialize table
    const table = new Tabulator("#assignment-table", {
      data: savedData,
      layout: "fitColumns",
      reactiveData: true,
      groupBy: "class",
      groupStartOpen: true,
      columns: [
        { title: "Class", field: "class", editor: "select", editorParams: {
            values: ["MATH 1220", "PHYS 2210", "ECE 1400"]
          }},
        { title: "Assignment", field: "assignment", editor: "input" },
        { title: "Due Date", field: "due", editor: "date" },
        { title: "Link", field: "link", editor: "input",
          formatter: "link", formatterParams: { target: "_blank" } },
        { formatter: "buttonCross", width: 40, align: "center", cellClick: function(e, cell){
            cell.getRow().delete();
            saveData();
        }}
      ],
      cellEdited: saveData,
      rowDeleted: saveData,
    });

    // Save data to localStorage
    function saveData() {
      localStorage.setItem("assignments", JSON.stringify(table.getData()));
    }

    // Add new assignment from form
    document.getElementById("add-btn").addEventListener("click", () => {
      const newRow = {
        class: document.getElementById("class-input").value,
        assignment: document.getElementById("assignment-input").value,
        due: document.getElementById("due-input").value,
        link: document.getElementById("link-input").value
      };
      table.addRow(newRow);
      saveData();

      // Clear inputs
      document.getElementById("assignment-input").value = "";
      document.getElementById("due-input").value = "";
      document.getElementById("link-input").value = "";
    });
  </script>
</body>
</html>
